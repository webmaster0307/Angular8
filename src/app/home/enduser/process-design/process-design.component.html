<ng-template #itemTemplate let-item="item" let-onCollapseExpand="onCollapseExpand"
  let-onCheckedChange="onCheckedChange">
  <div class="form-inline row-item">
    <i *ngIf="item.children" (click)="onCollapseExpand()" aria-hidden="true" class="fa"
      [class.fa-caret-right]="item.collapsed" [class.fa-caret-down]="!item.collapsed"></i>
    <div class="form-check">
      <label class="form-check-label" (click)="onTitleClick(item)">
        {{item.text}}
      </label>
      <label *ngIf="item.children" class="form-check-label">
        <button mat-icon-button [matMenuTriggerFor]="parentMenu" aria-label="Example icon-button with a menu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #parentMenu="matMenu">
          <div *ngFor="let pitem of parentobj[item.text]">
            <button (click)="onParentMenuItemClick(pitem.value,item.value)" *ngIf="pitem.havePermission" mat-menu-item>
              <span>{{pitem.item}}</span>
            </button>
          </div>
        </mat-menu>
      </label>
      <label *ngIf="!item.children" class="form-check-label">
        <button mat-icon-button [matMenuTriggerFor]="childMenu" aria-label="Example icon-button with a menu">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #childMenu="matMenu">
          <div *ngFor="let citem of childobj[item.text]">
            <button (click)="onChildMenuItemClick(citem.value,item)" *ngIf="citem.havePermission" mat-menu-item>
              <span *ngIf="citem.havePermission">{{citem.item}}</span>
            </button>
          </div>
        </mat-menu>
      </label>
    </div>
  </div>
</ng-template>
<div fxLayout="row">
  <mat-sidenav-container fxFlex="100">
    <mat-sidenav #treesidenav mode="side" [opened]="true" style="min-width:280px">
      <ngx-treeview [config]="config" [items]="item" [itemTemplate]="itemTemplate">
        <!-- (selectedChange)="onSelectedChange($event)" (filterChange)="onFilterChange($event)" -->
      </ngx-treeview>
    </mat-sidenav>
    <div fxFlex="100">
      <section>
        <div fxLayout="row">
          <div fxFlex="20px" class="toggle">
            <a href="javascript:void(0)" matTooltip="{{treesidenav.opened ? 'Hide Application' : 'Show Application'}}"
              (click)="treesidenav.toggle()">
              <mat-icon aria-hidden="false">{{treesidenav.opened ? 'arrow_left' : 'arrow_right'}}</mat-icon>
            </a>
          </div>
          <div fxFlex="100" fxLayout="column">
            <div fxFlex="100" id="canvas"></div>
            <div fxFlex="100">
              <div class="dynamicFormContent">
                <!-- <h3 style="text-align: center;" *ngIf="resFormData!='' &&  resFormData!=undefined">
                  {{Label['Parameters']}}</h3> -->
                <div class="dynamicContent">
                  <form name="form" #processForm="ngForm" novalidate>
                    <div class="padding-input flexLeft" *ngFor="let pr of resFormData"
                      [ngClass]="data.getFieldClass(pr.name)">
                      <ng-container *ngIf="!data.isFieldHidden(pr.name)">
                        <label class="f_label">{{pr.display | removeWt}}<span
                            *ngIf="data.isFieldMendatory(pr.name)">*</span></label>
                        <mat-icon *ngIf="pr.helptext!= null" matTooltip="{{pr.helptext}}" class="field-help"
                          matTooltipPosition="after">help</mat-icon>
                        <div *ngIf="pr.hasfield">
                          <ng-container [ngSwitch]="pr.type">
                            <ng-container *ngSwitchCase="'Radio Button'">
                              <mat-form-field class="form_input form_list" style="background-color: #f4f6f7">
                                <input matInput style="display: none">
                                <mat-radio-group #name="ngModel" [required]="data.isFieldMendatory()"
                                  [disabled]="data.isFieldDisabled()" [(ngModel)]="pr.value"
                                  (ngModelChange)="Update_value(pr.value,pr.placeholder)" [name]="pr.name">
                                  <mat-radio-button style="background-color: #f4f6f7" [value]="listOption"
                                    *ngFor="let listOption of getListOptions(pr.name)">{{listOption}}</mat-radio-button>
                                </mat-radio-group>
                              </mat-form-field>
                            </ng-container>
                            <ng-container *ngSwitchCase="'Checkbox'">
                              <mat-form-field class="form_input form_list" style="background-color: #f4f6f7">
                                <input matInput style="display: none">
                                <mat-selection-list #name="ngModel" [disabled]="data.isFieldDisabled()"
                                  [(ngModel)]="pr.value" (ngModelChange)="Update_value(pr.value,pr.placeholder)"
                                  style="background-color: #f4f6f7">
                                  <mat-list-option checkboxPosition="before" [value]="listOption"
                                    *ngFor="let listOption of getListOptions(pr.name)">
                                    {{listOption}}
                                  </mat-list-option>
                                </mat-selection-list>
                              </mat-form-field>
                            </ng-container>
                            <ng-container *ngSwitchCase="'date'">
                              <mat-form-field class="form_input">
                                <input #name="ngModel" [required]="data.isFieldMendatory()"
                                  [disabled]="data.isFieldDisabled()" [name]="pr.name" [value]="pr.value"
                                  (keyup)="Update_value($event.target.value,pr.placeholder)" [(ngModel)]="pr.value"
                                  matInput [matDatepicker]="picker" class="f_inp">
                                <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                                <mat-datepicker #picker></mat-datepicker>
                              </mat-form-field>
                              <div [style.visibility]="data.isFieldInvalid(name) ? 'visible': 'hidden'">
                                {{data.getFieldInValidMsg(name, pr.name)}}
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'time'">
                              <mat-form-field class="form_input">
                                <input #name="ngModel" [required]="data.isFieldMendatory()"
                                  [disabled]="data.isFieldDisabled()" matInput [type]="pr.type" [name]="pr.name"
                                  [value]="pr.value" (change)="Update_value($event.target.value,pr.placeholder)"
                                  [(ngModel)]="pr.value" class="f_inp">
                              </mat-form-field>
                              <div [style.visibility]="data.isFieldInvalid(name) ? 'visible': 'hidden'">
                                {{data.getFieldInValidMsg(name, pr.name)}}
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'datetime'">
                              <mat-form-field class="form_input" style="background-color: #f4f6f7">
                                <input #name="ngModel" [required]="data.isFieldMendatory()"
                                  [disabled]="data.isFieldDisabled()" matInput [name]="pr.name" [value]="pr.value"
                                  (change)="Update_value($event.target.value,pr.placeholder)" [(ngModel)]="pr.value"
                                  [owlDateTimeTrigger]="fdate" [owlDateTime]="fdate">
                                <owl-date-time [attr.id]="pr.name"></owl-date-time>
                              </mat-form-field>
                              <div [style.visibility]="data.isFieldInvalid(name) ? 'visible': 'hidden'">
                                {{data.getFieldInValidMsg(name, pr.name)}}
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'password'">
                              <mat-form-field class="form_input">
                                <input matInput #name="ngModel" [required]="data.isFieldMendatory(pr.name)"
                                  [readonly]="data.isFieldDisabled(pr.name)" [type]="pr.type" [name]="pr.name"
                                  [value]="pr.value" (change)="Update_value($event.target.value,pr.placeholder)"
                                  [(ngModel)]="pr.value" #name="ngModel" class="f_inp">
                              </mat-form-field>
                              <div [style.visibility]="data.isFieldInvalid(name) ? 'visible': 'hidden'">
                                {{data.getFieldInValidMsg(name, pr.name)}}
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'range'">
                              <mat-slider #name="ngModel" [(ngModel)]="pr.value" value="1" step="1" min="1" max="100"
                                (change)="Update_value($event.target.value,pr.placeholder)"
                                style="background-color: #f4f6f7">
                              </mat-slider>
                            </ng-container>
                            <ng-container *ngSwitchCase="color">
                              <mat-form-field class="form_input">
                                <input #name="ngModel" [(colorPicker)]="_backgroundColor"
                                  [style.background]="_backgroundColor" [(ngModel)]="pr.value" class="f_inp">
                              </mat-form-field>
                            </ng-container>
                            <ng-container *ngSwitchCase="'Text Area'">
                              <mat-form-field class="form_input">
                                <textarea matInput #name="ngModel" [required]="data.isFieldMendatory(pr.name)"
                                  [readonly]="data.isFieldDisabled(pr.name)" [name]="pr.name"
                                  [maxLength]="data.getFieldMaxLength(pr.name)" (value)="pr.value"
                                  (change)="Update_value($event.target.value,pr.placeholder)" [(ngModel)]="pr.value"
                                  class="f_inp">
                                    </textarea>
                              </mat-form-field>
                              <div [style.visibility]="data.isFieldInvalid(name) ? 'visible': 'hidden'">
                                {{data.getFieldInValidMsg(name, pr.name)}}
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="data.getFieldTypeForChange(pr.type)">
                              <mat-form-field class="form_input">
                                <input matInput [required]="data.isFieldMendatory(pr.name)"
                                  maxlength="data.getMaxLengthForField(pr.type)" [name]="pr.name" (value)="pr.value"
                                  (change)="Update_value($event.target.value,pr.placeholder)"
                                  (change)="data.transformFieldValueOnChange($event,pr.type)" [(ngModel)]="pr.value"
                                  class="f_inp" #name="ngModel">
                                <mat-autocomplete class="autoCompletes" #auto="matAutocomplete">
                                  <mat-option (click)="Update_value(pr.value ,pr.placeholder)"
                                    style="text-align:center;"
                                    *ngFor="let option of options[pr.name]| myfilter:FilterAutoValue" [value]="option">
                                    {{option}}
                                  </mat-option>
                                </mat-autocomplete>
                              </mat-form-field>
                              <div [style.visibility]="data.isFieldInvalid(name) ? 'visible': 'hidden'">
                                {{data.getFieldInValidMsg(name, pr.name)}}
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'Zip'">
                              <mat-form-field class="form_input">
                                <input type="text" pattern="^[0-9]{5}?$" [required]="data.isFieldMendatory(pr.name)"
                                  maxlength="5" matInput [disabled]="data.isFieldDisabled(pr.name)" [name]="pr.name"
                                  (value)="pr.value" [matAutocomplete]="auto"
                                  (key)="Update_value($event.target.value,pr.placeholder)" [(ngModel)]="pr.value"
                                  class="f_inp" #name="ngModel">

                                <mat-autocomplete class="autoCompletes" #auto="matAutocomplete">
                                  <mat-option style="text-align:center;"
                                    (click)="Update_value(pr.value ,pr.placeholder)"
                                    *ngFor="let option of options[pr.name]| myfilter:FilterAutoValue" [value]="option">
                                    {{option}}
                                  </mat-option>
                                </mat-autocomplete>
                              </mat-form-field>
                              <div [style.visibility]="data.isFieldInvalid(name) ? 'visible': 'hidden'">
                                {{data.getFieldInValidMsg(name, pr.name)}}
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchCase="'Email'">
                              <mat-form-field class="form_input">
                                <input type="email" [required]="data.isFieldMendatory(pr.name)" matInput
                                  [readonly]="data.isFieldDisabled(pr.name)" [name]="pr.name" (value)="pr.value"
                                  [matAutocomplete]="auto" (change)="Update_value($event.target.value,pr.placeholder)"
                                  [(ngModel)]="pr.value" class="f_inp" #name="ngModel" email="true"
                                  pattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}">

                                <mat-autocomplete class="autoCompletes" #auto="matAutocomplete">
                                  <mat-option style="text-align:center;"
                                    (click)="Update_value(pr.value ,pr.placeholder)"
                                    *ngFor="let option of options[pr.name]| myfilter:FilterAutoValue" [value]="option">
                                    {{option}}
                                  </mat-option>
                                </mat-autocomplete>
                              </mat-form-field>
                              <div [style.visibility]=" data.isFieldInvalid(name) ? 'visible': 'hidden'">
                                {{data.getFieldInValidMsg(name, pr.name)}}
                              </div>
                            </ng-container>
                            <ng-container *ngSwitchDefault>
                              <mat-form-field class="form_input">
                                <input matInput [name]="pr.name" [required]="data.isFieldMendatory(pr.name)"
                                  #name="ngModel" [readonly]="data.isFieldDisabled(pr.name)"
                                  (change)="Update_value(pr.value ,pr.placeholder)"
                                  [maxLength]="data.getFieldMaxLength(pr.name)" [matAutocomplete]="auto"
                                  [(ngModel)]="pr.value" class="f_inp">
                                <mat-autocomplete #auto="matAutocomplete">
                                  <mat-option style="text-align:center;"
                                    (click)="Update_value(pr.value ,pr.placeholder)"
                                    *ngFor="let option of options[pr.name]| myfilter:FilterAutoValue" [value]="option">
                                    {{option}}
                                  </mat-option>
                                </mat-autocomplete>
                              </mat-form-field>
                              <div [style.visibility]=" data.isFieldInvalid(name) ? 'visible': 'hidden'">
                                {{data.getFieldInValidMsg(name, pr.name)}}
                              </div>
                            </ng-container>
                          </ng-container>
                        </div>
                      </ng-container>
                    </div>
                  </form>
                </div>

              </div>
            </div>
          </div>
          <div fxFlex="20px" class="toggle">
            <a href="javascript:void(0)" matTooltip="{{opened ? 'Hide properties' : 'Show properties'}}"
              (click)="sidenav.toggle()">
              <mat-icon aria-hidden="false">{{opened ? 'arrow_right' : 'arrow_left'}}</mat-icon>
            </a>
          </div>
        </div>
      </section>
    </div>
    <mat-sidenav #sidenav position="end" mode="side" [(opened)]="opened">
      <div id="properties">

        <label><b> {{ generalId }} </b></label>
        <mat-tab-group mat-align-tabs="start">

          <mat-tab label="General">
            <div class="generalTabV">
              <label>Id </label>
              <input (change)="updateProcess()" [(ngModel)]="generalId">
            </div>
            <div class="oneSpace"></div>
            <div class="generalTabV">
              <label>Name </label>
              <input (change)="updateProcess()" [(ngModel)]="processName">
            </div>
            <div class="spaceDiv">
              <mat-divider></mat-divider>
            </div>

            <label><i>Documentation</i></label>
            <input (change)="updateProcess()" [(ngModel)]="processDocumentation">
          </mat-tab>

          <mat-tab label="Enable">
            <label>Executable Types </label>
            <select (change)="updateselectedExecutableType($event.target.value)">
              <option>-- please select --</option>
              <option *ngFor="let exeType of executableTypesData " [value]="exeType">
                {{ exeType}}
              </option>
            </select>
            <div class="oneSpace"></div>
            <label>Executables</label>
            <select (change)="updateselectedExecutable($event.target.value)">
              <option>-- please select --</option>
              <option *ngFor="let executable of executablesData " [value]="executable">
                {{ executable}}
              </option>
            </select>
            <div class="oneSpace"></div>
            <label>Executable Input</label>
            <input>
            <div class="oneSpace"></div>
            <label>Executable Output</label>
            <input disabled [(ngModel)]="executableOutput">
            <div class="oneSpace"></div>
            <label>Executable Description</label>
            <textarea disabled [(ngModel)]="executableDesc"></textarea>
            <div class="spaceDiv">
              <mat-divider></mat-divider>
            </div>
            <label>
              <b>Platform</b>
            </label>
            <label>
              Mysql
            </label>
          </mat-tab>

          <mat-tab label="Properties">
            <mat-checkbox>Display Output</mat-checkbox>
            <mat-checkbox>Summary Output</mat-checkbox>
            <mat-checkbox [(ngModel)]="isServiceActive" (change)="serviceActiveSelected($event.checked)">Service Active
            </mat-checkbox>
            <div *ngIf="isServiceActive">
              <label>Start Date</label>
              <mat-form-field class="form_input">
                <input matInput [value]="currentDate" [owlDateTimeTrigger]="startDate" [owlDateTime]="startDate">
                <owl-date-time #startDate></owl-date-time>
              </mat-form-field>
              <label>End Date</label>
              <mat-form-field class="form_input">
                <input matInput [value]="afterFiveDays" [owlDateTimeTrigger]="endDate" [owlDateTime]="endDate">
                <owl-date-time #endDate></owl-date-time>
              </mat-form-field>
            </div>
            <div class="spaceDiv">
              <mat-divider></mat-divider>
            </div>

            <label>Notification Email </label>
            <input type="email" [value]="userEmail" pattern="[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}">

            <div class="spaceDiv">
              <mat-divider></mat-divider>
            </div>

            <mat-radio-group [(ngModel)]="async_sync">
              <mat-radio-button value="async">Asynchronous</mat-radio-button>
              <mat-radio-button value="sync">Synchronous</mat-radio-button>
            </mat-radio-group>
            <div *ngIf="async_sync==='sync'">
              <div class="row row1">
                <input id="seconds" type="number" value=300>
                <label id="seconds_label">Seconds</label>
              </div>
              <div class="oneSpace"></div>
              <div class="row row1">
                <label id="priority_label">Priority</label>
                <input id="priority" type="number" value=3>
              </div>
            </div>

            <div class="spaceDiv">
              <mat-divider></mat-divider>
            </div>

            <label>Restorability</label>
            <mat-radio-group [(ngModel)]="restorability">
              <mat-radio-button value="none">None</mat-radio-button>
              <mat-radio-button value="manual">Manual</mat-radio-button>
              <mat-radio-button value="auto">Auto</mat-radio-button>
            </mat-radio-group>
            <div *ngIf="restorability==='auto'">
              <div class="row row1">
                <input id="seconds" type="number" value=3>
                <label id="seconds_label">Attemps</label>
              </div>
              <div class="oneSpace"></div>
              <div class="row row1">
                <input id="seconds" type="number" value=30>
                <label id="seconds_label">Seconds</label>
              </div>
            </div>

            <div class="spaceDiv">
              <mat-divider></mat-divider>
            </div>

            <label>Instances</label>
            <mat-radio-group [(ngModel)]="instances">
              <mat-radio-button value="single">Single</mat-radio-button>
              <mat-radio-button value="unlimited">Unlimited</mat-radio-button>
              <div class="row row1">
                <mat-radio-button value="limited">Limited</mat-radio-button>
                <div *ngIf="instances==='limited'">
                  <input id="priority" type="number" value=100>
                </div>
              </div>
            </mat-radio-group>
          </mat-tab>
        </mat-tab-group>
      </div>
    </mat-sidenav>
  </mat-sidenav-container>
</div>
